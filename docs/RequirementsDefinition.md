# レトロテトリス 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
レトロテトリス - 80年代アーケード風テトリスクローン

### 1.2 目的
80年代のレトロゲームスタイルを再現したテトリスゲームをブラウザ上で実現する。

### 1.3 スコープ
- フロントエンドのみの実装（バックエンド不要）
- ローカルPCでブラウザを開くだけで動作
- GitHub Pagesでの公開に対応

## 2. 機能要件

### 2.1 ゲームプレイ機能

#### 2.1.1 ブロック（テトリミノ）
- 7種類のテトリミノ（I, O, T, S, Z, J, L）
- 各テトリミノは固有の色を持つ
- 回転可能（時計回り90度）

#### 2.1.2 ゲームボード
- 10列 x 20行のグリッド
- ブロックは上部から落下
- 固定されたブロックはボードに残る

#### 2.1.3 ゲームルール
1. ブロックは一定間隔で自動落下
2. プレイヤーはブロックを左右移動・回転・落下加速が可能
3. 横一列が埋まるとその行は消去
4. ブロックが上部に達するとゲームオーバー

### 2.2 操作機能

| キー | 機能 |
|------|------|
| ←→ | ブロックを左右に移動 |
| ↑ | ブロックを回転 |
| ↓ | ブロックを速く落下（ソフトドロップ） |
| SPACE | ブロックを一番下まで落下（ハードドロップ） |
| P | 一時停止/再開 |
| R | リセット |
| S | ゲーム開始 |

### 2.3 スコアシステム

#### 2.3.1 ライン消去スコア
| アクション | 基本得点 |
|------------|----------|
| 1ライン消去 | 100 |
| 2ライン同時消去 | 300 |
| 3ライン同時消去 | 500 |
| 4ライン同時消去（テトリス） | 800 |

※ 実際のスコアは「基本得点 × 現在レベル」

#### 2.3.2 ハードドロップボーナス
- 落下距離 × 2 ポイント

### 2.4 レベルシステム
- 10ライン消去毎にレベルアップ
- レベルアップに伴い落下速度が上昇
- レベル表示はUIに反映

### 2.5 難易度設定

| 難易度 | 初期速度 | 速度減少量 | 最小速度 |
|--------|----------|------------|----------|
| EASY | 1000ms | 50ms/レベル | 200ms |
| NORMAL | 800ms | 40ms/レベル | 100ms |
| HARD | 500ms | 30ms/レベル | 50ms |

### 2.6 サウンド機能

#### 2.6.1 BGM
- コロベイニキ（ロシア民謡）をWeb Audio APIで再生
- メロディラインとベースラインの2パート構成
- ゲーム中はループ再生
- 一時停止時・ゲームオーバー時は停止

#### 2.6.2 効果音
- 移動時
- 回転時
- ブロック固定時
- ハードドロップ時
- ライン消去時
- テトリス（4ライン同時消去）時
- レベルアップ時
- ゲームオーバー時

#### 2.6.3 サウンド設定
- 効果音のON/OFF切り替え
- BGMのON/OFF切り替え

### 2.7 データ保存機能
- ハイスコアをブラウザのローカルストレージに保存
- ゲームオーバー時にハイスコアを更新（必要な場合）

### 2.8 UI機能

#### 2.8.1 メインゲームエリア
- ゲームボード（10x20グリッド）
- 現在のブロック表示
- ゴーストピース表示（落下位置プレビュー）

#### 2.8.2 情報パネル（左）
- NEXTブロック表示
- 現在のスコア
- ハイスコア
- 現在のレベル
- 消去ライン数

#### 2.8.3 設定パネル（右）
- 操作説明
- 難易度選択
- サウンドON/OFF
- BGM ON/OFF
- START/PAUSE/RESETボタン

#### 2.8.4 オーバーレイ
- 一時停止時のPAUSED表示
- ゲームオーバー時のGAME OVER表示とスコア表示

## 3. 非機能要件

### 3.1 パフォーマンス
- スムーズなアニメーション（60fps維持）
- 入力遅延の最小化

### 3.2 互換性
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### 3.3 レスポンシブ対応
- デスクトップ表示に最適化
- 画面サイズに応じたレイアウト調整

### 3.4 アクセシビリティ
- キーボード操作のみで完全にプレイ可能
- 高コントラストな色使い

## 4. デザイン要件

### 4.1 ビジュアルスタイル
- 80年代アーケードゲーム風のドット絵スタイル
- ネオンカラーを基調としたカラーパレット
- スキャンライン効果
- グロー（発光）エフェクト

### 4.2 カラーパレット

| 要素 | 色 |
|------|-----|
| 背景 | #0f0f23 〜 #1a1a3e（グラデーション） |
| ボーダー | #00ff00（緑） |
| タイトル | #00ffff（シアン） |
| パネルタイトル | #ffff00（黄） |
| スコア | #00ff00（緑） |
| Iピース | #00ffff（シアン） |
| Oピース | #ffff00（黄） |
| Tピース | #ff00ff（マゼンタ） |
| Sピース | #00ff00（緑） |
| Zピース | #ff0000（赤） |
| Jピース | #0000ff（青） |
| Lピース | #ff8800（オレンジ） |

### 4.3 フォント
- Press Start 2P（Google Fonts）
- フォールバック: Courier New, monospace

## 5. 技術スタック

### 5.1 フロントエンド
- HTML5（Canvas API）
- CSS3（カスタムスタイル + Tailwind CSS CDN）
- JavaScript（ES6+）

### 5.2 API
- Web Audio API（サウンド再生）
- Canvas API（描画）
- LocalStorage API（データ保存）

## 6. ファイル構成

```
src/
├── index.html        # メインHTML
├── css/
│   └── styles.css    # スタイルシート
└── js/
    └── script.js     # ゲームロジック
```

## 7. 更新履歴

| 日付 | バージョン | 変更内容 |
|------|------------|----------|
| 2024-11-27 | 1.0.0 | 初版作成 |
